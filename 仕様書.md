以下は「ローカルで動作確認できるレベル」を想定した、**匿名掲示板（5ch風）Webサイト**の機能要件をまとめた仕様書です（会員登録なし／匿名投稿）。

---

# 匿名掲示板Webサイト 機能要件仕様書

## 1. システム概要

### 1.1 システム名

匿名掲示板Webサイト（仮）

### 1.2 目的

会員登録なしで、誰でも匿名でスレッド作成・投稿（レス）・閲覧ができる掲示板を提供する。

### 1.3 想定利用環境

* PC / スマホのWebブラウザ（レスポンシブ対応は簡易でも可）
* サーバー：ローカル環境で起動（開発用）

---

## 2. 画面一覧（機能単位）

1. 板（カテゴリ）一覧
2. スレッド一覧（板配下）
3. スレッド詳細（投稿一覧＋投稿フォーム）
4. スレッド作成フォーム
5. （任意）検索画面（スレ/投稿検索）

---

## 3. 機能要件

## 3.1 閲覧機能

### 3.1.1 板（カテゴリ）一覧表示

* 板の一覧を表示できる
* 表示項目

  * 板名
  * 板の説明（任意）
  * スレッド数（任意）

### 3.1.2 スレッド一覧表示（板配下）

* 選択した板に属するスレッド一覧を表示できる
* 表示項目

  * スレッドタイトル
  * 作成日時
  * 最終更新日時（最新レス日時）
  * レス数
* 並び順

  * デフォルト：最終更新日時の降順（勢いの簡易版）
* ページング

  * 1ページあたりの表示件数を設定可能（例：20件）

### 3.1.3 スレッド詳細表示

* 対象スレッドの投稿（レス）一覧を表示できる
* 表示項目（各投稿）

  * 投稿番号（1,2,3…）
  * 名前（デフォルト「名無しさん」）
  * 投稿日時
  * 本文
  * （任意）ID（簡易な識別子）
* ページング / もっと見る

  * レス数が多い場合に分割表示できる（例：50件単位）

---

## 3.2 投稿機能（匿名）

### 3.2.1 スレッド作成

* 会員登録なしでスレッドを作成できる
* 入力項目

  * タイトル（必須）
  * 名前（任意、未入力は「名無しさん」）
  * 本文（必須：スレ1の投稿として扱う）
* バリデーション

  * タイトル：1〜100文字
  * 本文：1〜2000文字
  * 名前：0〜50文字
* 正常完了時

  * 作成したスレッド詳細画面へ遷移

### 3.2.2 レス投稿

* スレッド詳細画面でレスを投稿できる
* 入力項目

  * 名前（任意、未入力は「名無しさん」）
  * 本文（必須）
* バリデーション

  * 本文：1〜2000文字
  * 名前：0〜50文字
* 正常完了時

  * スレッド詳細に反映（リロード or 非同期）

---

## 3.3 NG/スパム対策（最低限）

### 3.3.1 連投制限（レート制限）

* 同一クライアントからの投稿間隔を制限できる（例：10秒）
* 判定軸（簡易）

  * IPアドレス、もしくは簡易ID（後述）

### 3.3.2 NGワード（任意）

* 管理者がNGワードを設定できる（ローカル運用なら固定でも可）
* NGワード含有時は投稿不可、エラーメッセージを表示

### 3.3.3 入力サニタイズ

* XSS対策として本文はHTMLとして解釈しない（エスケープ表示）

---

## 3.4 検索機能（任意）

### 3.4.1 スレッド検索

* タイトルの部分一致で検索可能

### 3.4.2 投稿検索

* 本文の部分一致で検索可能（重い場合は未実装でも可）

---

## 3.5 管理機能（ローカル想定の簡易）

### 3.5.1 スレッド削除（任意）

* 管理用の秘密キー（環境変数など）を持つ場合のみ削除可能

### 3.5.2 投稿削除（任意）

* 同上

※本番運用を前提とする場合は認可設計を別途定義。

---

## 4. データ要件（最低限）

### 4.1 エンティティ

* Board（板）
* Thread（スレッド）
* Post（投稿）

### 4.2 主な項目例

**Board**

* id, name, description, createdAt

**Thread**

* id, boardId, title, createdAt, updatedAt

**Post**

* id, threadId, number(連番), name, body, createdAt, clientId（任意）

---

## 5. 非機能要件（最低限）

### 5.1 パフォーマンス

* ローカルでスレッド閲覧・投稿がストレスなく動くこと
* 取得件数が増える前提で一覧／投稿はページング前提

### 5.2 セキュリティ

* XSS対策（本文エスケープ）
* CSRFはローカル簡易なら省略可（本番は必須）
* レート制限（最低限）

### 5.3 ログ

* エラー発生時にサーバーログに記録

---

## 6. 例外・エラーハンドリング

* 必須項目未入力：画面にエラーメッセージ表示
* 存在しない板/スレッド：404表示
* レート制限：一定時間待つよう表示
* サーバーエラー：汎用エラーページ表示

---

